(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{195:function(e,n,t){e.exports=t(326)},204:function(e,n,t){},206:function(e,n,t){},326:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(17),i=t.n(o),c=t(18),l=t(29),s=t(46),u={},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"SET_CHANNEL_ID":return console.log("action ",n),Object(s.a)({},e,{channel:n.channel});case"SET_VIDEO":return Object(s.a)({},e,{video:n.video});case"SET_CHANNELS":return Object(s.a)({},e,{channels:n.channels});default:return e}},p=t(102),h=(t(204),t(22)),m=t(23),f=t(25),v=t(24),y=t(26),b=(t(206),t(66)),g=t.n(b),w=t(30),E=t.n(w),C=t(67),I=function(e){return function(){var n=Object(C.a)(E.a.mark(function n(t){var a,r;return E.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("CHANNEL ",e),n.next=3,fetch("/api/channels/".concat(e));case 3:return a=n.sent,n.next=6,a.json();case 6:r=n.sent,t(O(r));case 8:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}()},O=function(e){return{type:"SET_CHANNEL_ID",channel:e}},T=function(){return function(){var e=Object(C.a)(E.a.mark(function e(n){var t,a;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/channels/");case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,n(j(a)),n(I(x(a)[1]));case 8:case"end":return e.stop()}},e,this)}));return function(n){return e.apply(this,arguments)}}()},j=function(e){return{type:"SET_CHANNELS",channels:e}},x=function(e){return e[Math.floor(Math.random()*e.length)]},S=t(7),N=function(e){function n(e){var t;Object(h.a)(this,n),(t=Object(f.a)(this,Object(v.a)(n).call(this,e))).init=function(){var e=document.createElement("script");e.src="https://www.youtube.com/iframe_api";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)},t.onPlayerReady=function(e){t.props.setVideo(e),t.player.playVideo()},t.onPlayerStateChange=function(e){e.data===t.YT.PlayerState.ENDED&&(t.index+t.videoIndexToPlay===t.props.channel.videos.length&&(t.index=0,t.videoIndexToPlay=0),t.player.loadVideoById({videoId:t.props.channel.videos[t.videoIndexToPlay+t.index].videoId}),t.index++)},t.stopVideo=function(){t.player.stopVideo()},t.findStartVideoAndTime=function(e){for(var n,t=Math.floor((new Date).getTime()/1e3)%e.totalDuration,a=0,r=0;a<=t;)n=g.a.duration(e.videos[r].duration)/1e3,a+=g.a.duration(e.videos[r].duration)/1e3,r++;return{startTime:t-(a-=n),videoIndexToPlay:r-1}},t.loadNewChannel=function(){var e=t.findStartVideoAndTime(t.props.channel),n=e.startTime,a=e.videoIndexToPlay;t.videoIndexToPlay=a,t.index=1,t.props.setVideo(t.props.channel.videos[a]),t.player.loadVideoById({videoId:t.props.channel.videos[t.videoIndexToPlay].videoId,startSeconds:n})},t.init(),t.index=1;var a=t.findStartVideoAndTime(t.props.channel),r=a.startTime,o=a.videoIndexToPlay;return t.videoIndexToPlay=o,window.onYouTubeIframeAPIReady=function(e){t.YT=window.YT,t.player=new window.YT.Player("player",{videoId:t.props.channel.videos[t.videoIndexToPlay].videoId,playerVars:{start:r,controls:1,iv_load_policy:3,modestbranding:1},width:1088,height:663,events:{onStateChange:t.onPlayerStateChange,onReady:function(){return t.onPlayerReady(t.props.channel.videos[t.videoIndexToPlay])}}})},t}return Object(y.a)(n,e),Object(m.a)(n,[{key:"componentDidUpdate",value:function(){this.loadNewChannel()}},{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(a.Fragment,null,r.a.createElement("div",{id:"player",className:e.video}))}}]),n}(a.Component),k=Object(c.b)(function(e){return{channels:e.channels,channel:e.channel}},function(e){return{setVideo:function(n){return e(function(e){return{type:"SET_VIDEO",video:e}}(n))}}})(Object(S.withStyles)(function(e){return{video:{width:"100%"}}})(N)),P=t(44),V=t(16),D=t(103),B=t.n(D),A=t(104),_=t.n(A),R=t(68),M=t.n(R),L=function(e){function n(e){var t;return Object(h.a)(this,n),(t=Object(f.a)(this,Object(v.a)(n).call(this,e))).handleClick=function(){t.setState({drawerOpen:!0})},t.toggleDrawer=function(){t.setState({drawerOpen:!1})},t.randomChoice=function(e){return e[Math.floor(Math.random()*e.length)]},t.setChannel=function(e,n){if("normal"===n)t.setState({prevChannel:t.props.channel.channelId}),console.log("CA ",e),t.props.getChannelId(e);else if("random"===n){var a=t.randomChoice(t.props.channels)[1];t.setState({prevChannel:t.props.channel.channelId}),t.props.getChannelId(a)}else"previous"===n&&(t.setState({prevChannel:t.props.channel.channelId}),t.props.getChannelId(t.state.prevChannel))},t.state={drawerOpen:!1,prevChannel:void 0},t}return Object(y.a)(n,e),Object(m.a)(n,[{key:"render",value:function(){var e=this,n=this.props.classes,t=r.a.createElement(a.Fragment,null,r.a.createElement(V.d,null,this.props.channels.map(function(t){return r.a.createElement(V.e,{button:!0,key:t[1],onClick:function(){return e.setChannel(t[1],"normal")}},r.a.createElement(V.f,{primary:t[0].toUpperCase(),classes:{primary:n.listTitles}}))})));return r.a.createElement(a.Fragment,null,r.a.createElement(V.b,{container:!0,justify:"space-between",alignItems:"center"},r.a.createElement(V.b,{item:!0,xs:12,sm:6},r.a.createElement(V.c,{className:n.menuIconButton,onClick:function(){return e.handleClick()},disableRipple:!0},r.a.createElement(B.a,{className:n.icon})),this.state.prevChannel?r.a.createElement(V.c,{className:n.iconButton,onClick:function(){return e.setChannel(null,"previous")},disableRipple:!0},r.a.createElement(M.a,{className:n.icon})):r.a.createElement(V.c,{className:n.iconButton,disabled:!0,disableRipple:!0},r.a.createElement(M.a,{className:n.icon})),r.a.createElement(V.c,{className:n.iconButton,onClick:function(){return e.setChannel(null,"random")},disableRipple:!0},r.a.createElement(_.a,{className:n.icon}))),r.a.createElement(V.b,{item:!0,xs:12,sm:6},r.a.createElement(V.g,{variant:"h4",component:"a",href:"https://www.youtube.com/channel/".concat(this.props.channel.channelId),className:n.title},this.props.channel.channelTitle.toUpperCase()))),r.a.createElement(V.a,{anchor:"left",open:this.state.drawerOpen,classes:{paper:n.paper},onClose:function(){return e.toggleDrawer()}},r.a.createElement("div",{tabIndex:0,role:"button",onClick:function(){return e.toggleDrawer()}},t)))}}]),n}(a.Component),F=Object(c.b)(function(e){return{channels:e.channels,channel:e.channel,video:e.video}},function(e){return{getChannelId:function(n){return e(I(n))},getChannels:function(){return e(T())}}})(Object(S.withStyles)(function(e){return{menuIconButton:{marginLeft:12,marginRight:28,color:"white",opacity:.6,"&:hover":{backgroundColor:"transparent"}},iconButton:{color:"white",opacity:.6,"&:hover":{backgroundColor:"transparent"}},icon:{fontSize:36},title:Object(P.a)({float:"right",display:"inline",paddingTop:1,paddingRight:55,fontSize:36,color:"white",textDecoration:"none",opacity:.6},e.breakpoints.down("xs"),{marginLeft:24,marginBottom:24}),paper:{background:"#111111",opacity:.8,width:340},listTitles:{color:"white",opacity:.7,fontSize:23}}})(L)),H=Object(S.createMuiTheme)({typography:{fontFamily:"'Questrial', sans-serif",useNextVariants:!0}}),Y=function(e){function n(e){return Object(h.a)(this,n),Object(f.a)(this,Object(v.a)(n).call(this,e))}return Object(y.a)(n,e),Object(m.a)(n,[{key:"componentDidMount",value:function(){this.props.getChannels()}},{key:"render",value:function(){this.props.classes;return r.a.createElement(S.MuiThemeProvider,{theme:H},r.a.createElement("div",null,this.props.channel?r.a.createElement(a.Fragment,null,r.a.createElement(F,null),r.a.createElement(k,null)):r.a.createElement(a.Fragment,null)))}}]),n}(a.Component),z=Object(c.b)(function(e){return{channel:e.channel,channels:e.channels,channelId:e.channelId,video:e.video}},function(e){return{getChannels:function(){return e(T())}}})(Object(S.withStyles)(function(e){return{drawer:{textAlign:"left"}}})(Y)),U=Object(l.c)(d,Object(l.a)(p.a));i.a.render(r.a.createElement(c.a,{store:U},r.a.createElement(z,null)),document.getElementById("root"))}},[[195,2,1]]]);
//# sourceMappingURL=main.dc30cb24.chunk.js.map